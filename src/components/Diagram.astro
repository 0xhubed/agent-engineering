---
interface Props {
  title?: string;
  caption?: string;
  class?: string;
}

const { title, caption, class: className = '' } = Astro.props;
---

<figure class={`diagram my-6 ${className}`}>
  {title && (
    <div class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">{title}</div>
  )}
  <div class="diagram-content bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg p-4 overflow-x-auto">
    <pre class="font-mono text-sm text-slate-700 dark:text-slate-300 whitespace-pre leading-relaxed"><slot /></pre>
  </div>
  {caption && (
    <figcaption class="text-xs text-slate-500 dark:text-slate-400 mt-2 italic text-center">
      {caption}
    </figcaption>
  )}
</figure>

<style>
  .diagram-content pre {
    background: transparent;
    margin: 0;
    padding: 0;
    border: none;
  }
</style>
